{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/frontend/src/config/index.ts"],"sourcesContent":["export const LOCAL_STORAGE_APP_KEY = \"TEMP_KEY_LOCAL_HARD_TO_GUESS\";\r\nexport const ENV_IS_PROD = process.env.NEXT_PUBLIC_IS_PROD == \"1\";\r\n\r\nexport const BASE_URL = ENV_IS_PROD ? \"/api\" : \"http://localhost:4000/api\";\r\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,wBAAwB;AAC9B,MAAM,cAAc,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAEvD,MAAM,WAAW,cAAc,SAAS"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/frontend/src/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport type { NextRequest } from \"next/server\";\r\nimport { LOCAL_STORAGE_APP_KEY } from \"./config\";\r\n\r\nconst PROTECTED_ROUTES = [\"/dashboard\", \"/profile\"];\r\nconst ADMIN_ROUTES = [\"/admin\"];\r\nconst PUBLIC_ROUTES = [\"/login\", \"/register\"];\r\n\r\nfunction isAuthenticated(request: NextRequest): boolean {\r\n  const cookie = request.cookies.get(LOCAL_STORAGE_APP_KEY);\r\n  if (!cookie) return false;\r\n  \r\n  try {\r\n    const userData = JSON.parse(cookie.value);\r\n    return !!(userData && userData.token);\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction isAdmin(request: NextRequest): boolean {\r\n  const cookie = request.cookies.get(LOCAL_STORAGE_APP_KEY);\r\n  if (!cookie) return false;\r\n  \r\n  try {\r\n    const userData = JSON.parse(cookie.value);\r\n    return userData?.role === \"ADMIN\" || userData?.role === \"SUPER_ADMIN\";\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function middleware(request: NextRequest) {\r\n  const pathname = request.nextUrl.pathname;\r\n  const userIsAuthenticated = isAuthenticated(request);\r\n  const userIsAdmin = isAdmin(request);\r\n\r\n  const isProtectedRoute = PROTECTED_ROUTES.some((route) =>\r\n    pathname.startsWith(route)\r\n  );\r\n  const isAdminRoute = ADMIN_ROUTES.some((route) =>\r\n    pathname.startsWith(route)\r\n  );\r\n  const isPublicRoute = PUBLIC_ROUTES.some((route) =>\r\n    pathname === route || pathname.startsWith(route)\r\n  );\r\n\r\n  // Redirect authenticated users away from public routes\r\n  if (isPublicRoute && userIsAuthenticated) {\r\n    return NextResponse.redirect(new URL(\"/dashboard\", request.url));\r\n  }\r\n\r\n  // Protect admin routes\r\n  if (isAdminRoute) {\r\n    if (!userIsAuthenticated) {\r\n      return NextResponse.redirect(new URL(\"/login\", request.url));\r\n    }\r\n    if (!userIsAdmin) {\r\n      return NextResponse.redirect(new URL(\"/dashboard\", request.url));\r\n    }\r\n  }\r\n\r\n  // Protect regular protected routes\r\n  if (isProtectedRoute && !userIsAuthenticated) {\r\n    return NextResponse.redirect(new URL(\"/login\", request.url));\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\"/((?!api|_next/static|_next/image|favicon.ico|.*\\\\..*).*)\"],\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAEA;;;AAEA,MAAM,mBAAmB;IAAC;IAAc;CAAW;AACnD,MAAM,eAAe;IAAC;CAAS;AAC/B,MAAM,gBAAgB;IAAC;IAAU;CAAY;AAE7C,SAAS,gBAAgB,OAAoB;IAC3C,MAAM,SAAS,QAAQ,OAAO,CAAC,GAAG,CAAC,mKAAqB;IACxD,IAAI,CAAC,QAAQ,OAAO;IAEpB,IAAI;QACF,MAAM,WAAW,KAAK,KAAK,CAAC,OAAO,KAAK;QACxC,OAAO,CAAC,CAAC,CAAC,YAAY,SAAS,KAAK;IACtC,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,QAAQ,OAAoB;IACnC,MAAM,SAAS,QAAQ,OAAO,CAAC,GAAG,CAAC,mKAAqB;IACxD,IAAI,CAAC,QAAQ,OAAO;IAEpB,IAAI;QACF,MAAM,WAAW,KAAK,KAAK,CAAC,OAAO,KAAK;QACxC,OAAO,UAAU,SAAS,WAAW,UAAU,SAAS;IAC1D,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IACzC,MAAM,sBAAsB,gBAAgB;IAC5C,MAAM,cAAc,QAAQ;IAE5B,MAAM,mBAAmB,iBAAiB,IAAI,CAAC,CAAC,QAC9C,SAAS,UAAU,CAAC;IAEtB,MAAM,eAAe,aAAa,IAAI,CAAC,CAAC,QACtC,SAAS,UAAU,CAAC;IAEtB,MAAM,gBAAgB,cAAc,IAAI,CAAC,CAAC,QACxC,aAAa,SAAS,SAAS,UAAU,CAAC;IAG5C,uDAAuD;IACvD,IAAI,iBAAiB,qBAAqB;QACxC,OAAO,4MAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,QAAQ,GAAG;IAChE;IAEA,uBAAuB;IACvB,IAAI,cAAc;QAChB,IAAI,CAAC,qBAAqB;YACxB,OAAO,4MAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC5D;QACA,IAAI,CAAC,aAAa;YAChB,OAAO,4MAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,QAAQ,GAAG;QAChE;IACF;IAEA,mCAAmC;IACnC,IAAI,oBAAoB,CAAC,qBAAqB;QAC5C,OAAO,4MAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;IAC5D;IAEA,OAAO,4MAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAA4D;AACxE"}}]
}